import os 
import csv

dataset_path = "./drebin"
csv_path = "./unfiltered.csv"

acceptable_familes = ["FakeInstaller", "Opfake", "DroidKungFu", "Plankton", "GinMaster"]


with open(csv_path, mode='r') as infile:
    reader = csv.reader(infile)
    dicts = {rows[0]:rows[1] for rows in reader}

#     with open("labels.csv", mode='w', newline='') as file:
#         writer = csv.writer(file)
#         writer.writerow(["sha256", "family"])
        
#         for key, value in dicts.items():
#             if value in acceptable_familes:
#                 writer.writerow([key, value])
#                 # print(key, value)


listofapks = os.listdir(dataset_path)

for apk in listofapks:
    if dicts[apk] not in acceptable_familes:
        os.remove(os.path.join(dataset_path, apk))
